---
emoji: π’»
title: "[Programmers] 67260λ²: λ™κµ΄ νƒν— (Python)"
date: '2022-05-02 12:30:00'
author: JFe
tags: Algorithm
categories: Algorithm
---

## [2020 μΉ΄μΉ΄μ¤ μΈν„΄μ‹­]

## λ¬Έμ 
https://programmers.co.kr/learn/courses/30/lessons/67260

[λ³Έ λ¬Έμ λ” μ •ν™•μ„±κ³Ό ν¨μ¨μ„± ν…μ¤νΈ κ°κ° μ μκ°€ μλ” λ¬Έμ μ…λ‹λ‹¤.]

μ¤μ§€ νƒν—κ°€μΈ ν”„λ΅λ„λ” νƒν— λ„μ¤‘ nκ°μ λ°©μΌλ΅ μ΄λ£¨μ–΄μ§„ μ§€ν• λ™κµ΄μ„ νƒν—ν•κ² λμ—μµλ‹λ‹¤. λ¨λ“  λ°©μ—λ” 0λ¶€ν„° n - 1 κΉμ§€ λ²νΈκ°€ λ¶™μ–΄μκ³ , μ΄ λ™κµ΄μ— λ“¤μ–΄κ° μ μλ” μ μΌν• μ…κµ¬λ” 0λ² λ°©κ³Ό μ—°κ²°λμ–΄ μμµλ‹λ‹¤. κ° λ°©λ“¤μ€ μ–‘λ°©ν–¥μΌλ΅ ν†µν–‰μ΄ κ°€λ¥ν• ν†µλ΅λ΅ μ„λ΅ μ—°κ²°λμ–΄ μλ”λ°, μ„λ΅ λ‹¤λ¥Έ λ‘ λ°©μ„ μ§μ ‘ μ—°κ²°ν•λ” ν†µλ΅λ” μ¤μ§ ν•λ‚μ…λ‹λ‹¤. μ„μμ μ„λ΅ λ‹¤λ¥Έ λ‘ λ°© μ‚¬μ΄μ μµλ‹¨κ²½λ΅λ” λ”± ν• κ°€μ§€λ§ μμΌλ©°, λν• μ„μμ λ‘ λ°© μ‚¬μ΄μ— μ΄λ™μ΄ λ¶κ°€λ¥ν• κ²½μ°λ” μ—†μµλ‹λ‹¤.

νƒν—μ— μ•μ„ μ΄ μ§€ν• λ™κµ΄μ μ§€λ„λ¥Ό μ†μ— λ„£μ€ ν”„λ΅λ„λ” λ‹¤μκ³Ό κ°™μ΄ νƒν— κ³„νμ„ μ„Έμ› μµλ‹λ‹¤.

1. λ¨λ“  λ°©μ„ μ μ–΄λ„ ν• λ²μ€ λ°©λ¬Έν•΄μ•Ό ν•©λ‹λ‹¤.  
2. νΉμ • λ°©μ€ λ°©λ¬Έν•κΈ° μ „μ— λ°λ“μ‹ λ¨Όμ € λ°©λ¬Έν•  λ°©μ΄ μ •ν•΄μ Έ μμµλ‹λ‹¤.  
    2-1. μ΄λ” Aλ² λ°©μ€ λ°©λ¬Έν•κΈ° μ „μ— λ°λ“μ‹ Bλ² λ°©μ„ λ¨Όμ € λ°©λ¬Έν•΄μ•Ό ν•λ‹¤λ” μλ―Έμ…λ‹λ‹¤.  
    2-2. μ–΄λ–¤ λ°©μ„ λ°©λ¬Έν•κΈ° μ„ν•΄ λ°λ“μ‹ λ¨Όμ € λ°©λ¬Έν•΄μ•Ό ν•λ” λ°©μ€ μ—†κ±°λ‚ λλ” 1κ° μ…λ‹λ‹¤.  
    2-3. μ„λ΅ λ‹¤λ¥Έ λ‘ κ° μ΄μƒμ λ°©μ— λ€ν•΄ λ¨Όμ € λ°©λ¬Έν•΄μ•Ό ν•λ” λ°©μ΄ κ°™μ€ κ²½μ°λ” μ—†μµλ‹λ‹¤.  
    2-4. μ–΄λ–¤ λ°©μ΄ λ¨Όμ € λ°©λ¬Έν•΄μ•Ό ν•λ” λ°©μ΄λ©΄μ„ λ™μ‹μ— λ‚μ¤‘μ— λ°©λ¬Έν•΄μ•Ό λλ” λ°©μΈ κ²½μ°λ” μ—†μµλ‹λ‹¤.  

μ„ κ³„ν μ¤‘ 2-2, 2-3, 2-4λ” μμ„λ¥Ό μ§€μΌ λ°©λ¬Έν•΄μ•Ό ν•λ” λ‘ λ°©μ μμ΄ `A β†’ B`(Aλ¥Ό λ¨Όμ € λ°©λ¬Έν•κ³  Bλ¥Ό λ°©λ¬Έν•¨) ν•νƒλ΅ μ μΌν•¨μ„ μλ―Έν•©λ‹λ‹¤. μ¦‰, ν”„λ΅λ„λ” μ•„λμ™€ κ°™μ€ ν•νƒλ΅ λ°©λ¬Έμμ„κ°€ μ΅νμ§€ μ•λ„λ΅ λ°©λ¬Έ κ³„νμ„ μ„Έμ› μµλ‹λ‹¤.

- `A β†’ B, A β†’ C` (λ°©λ¬Έμμ„ λ°°μ—΄ order = [...,[A,B],...,[A,C],...]) ν•νƒλ΅ Aλ¥Ό λ°©λ¬Έ ν›„μ— λ°©λ¬Έν•΄μ•Ό ν•  λ°©μ΄ Bμ™€ Cλ΅ λ‘ κ° λλ” κ·Έ μ΄μƒμΈ κ²½μ°  
- `X β†’ A, Z β†’ A` (λ°©λ¬Έμμ„ λ°°μ—΄ order = [...,[X,A],...,[Z,A],...]) ν•νƒλ΅ Aλ¥Ό λ°©λ¬Έν•κΈ° μ „μ— λ°©λ¬Έν•΄μ•Ό ν•  λ°©μ΄ Xμ™€ Zλ΅ λ‘ κ° λλ” κ·Έ μ΄μƒμΈ κ²½μ°  
- `A β†’ B β†’ C` (λ°©λ¬Έμμ„ λ°°μ—΄ order = [...,[A,B],...,[B,C],...) ν•νƒλ΅ Bμ²λΌ A λ°©λ¬Έ ν›„μ΄λ©΄μ„ λ™μ‹μ— C λ°©λ¬Έ μ „μΈ κ²½μ°  
κ·Έλ¦¬κ³  λ¨Όμ € λ°©λ¬Έν•΄μ•Ό ν•  λ°©κ³Ό λ‚μ¤‘μ— λ°©λ¬Έν•  λ°©μ„ λ°λ“μ‹ μ—°μ†ν•΄μ„ λ°©λ¬Έν•΄μ•Ό ν•  ν•„μ”λ” μ—†μ–΄ Aλ°©μ„ λ°©λ¬Έν• ν›„ λ‹¤λ¥Έ λ°©μ„ λ°©λ¬Έν• ν›„ Bλ°©μ„ λ°©λ¬Έν•΄λ„ μΆ‹μµλ‹λ‹¤.  

λ°© κ°μ n, λ™κµ΄μ κ° ν†µλ΅λ“¤μ΄ μ—°κ²°ν•λ” λ‘ λ°©μ λ²νΈκ°€ λ‹΄κΈ΄ 2μ°¨μ› λ°°μ—΄ path, ν”„λ΅λ„κ°€ μ •ν• λ°©λ¬Έ μμ„κ°€ λ‹΄κΈ΄ 2μ°¨μ› λ°°μ—΄ orderκ°€ λ§¤κ°λ³€μλ΅ μ£Όμ–΄μ§ λ•, ν”„λ΅λ„κ°€ κ·μΉ™μ— λ§κ² λ¨λ“  λ°©μ„ νƒν—ν•  μ μμ„ μ§€ return ν•λ„λ΅ solution ν•¨μλ¥Ό μ™„μ„±ν•΄μ£Όμ„Έμ”.

---

## μ ν•μ‚¬ν•­  
- nμ€ 2 μ΄μƒ 200,000 μ΄ν•μ…λ‹λ‹¤.  
- path λ°°μ—΄μ μ„Έλ΅(ν–‰) κΈΈμ΄λ” n - 1 μ…λ‹λ‹¤.  
    - path λ°°μ—΄μ μ›μ†λ” [λ°© λ²νΈ A, λ°© λ²νΈ B] ν•νƒμ…λ‹λ‹¤.  
    - λ‘ λ°© A, Bμ‚¬μ΄λ¥Ό μ—°κ²°ν•λ” ν†µλ΅λ¥Ό λ‚νƒ€λƒ…λ‹λ‹¤.  
    - ν†µλ΅κ°€ μ—°κ²°ν•λ” λ‘ λ°© λ²νΈκ°€ μμ„μ—†μ΄ λ“¤μ–΄μμμ— μ£Όμν•μ„Έμ”.  
- order λ°°μ—΄μ μ„Έλ΅(ν–‰) κΈΈμ΄λ” 1 μ΄μƒ (n / 2) μ΄ν•μ…λ‹λ‹¤.  
    - order λ°°μ—΄μ μ›μ†λ” [λ°© λ²νΈ A, λ°© λ²νΈ B] ν•νƒμ…λ‹λ‹¤.  
    - Aλ² λ°©μ„ λ¨Όμ € λ°©λ¬Έν• ν›„ Bλ² λ°©μ„ λ°©λ¬Έν•΄μ•Ό ν•¨μ„ λ‚νƒ€λƒ…λ‹λ‹¤.  

---

## μ…μ¶λ ¥ μ  
|n|path|order|result|
|---|---|---|---|
|9|[[0,1],[0,3],[0,7],[8,1],[3,6],[1,2],[4,7],[7,5]]|[[8,5],[6,7],[4,1]]|true|
|9|[[8,1],[0,1],[1,2],[0,7],[4,7],[0,3],[7,5],[3,6]]|[[4,1],[5,2]]|true|
|9|[[0,1],[0,3],[0,7],[8,1],[3,6],[1,2],[4,7],[7,5]]|[[4,1],[8,7],[6,5]]|false|


---

## π” Algorithm
**DFS**

## π’» Logic

```Python
# tree μ •λ³΄ μ…λ ¥
    for a, b in path:
        tree[a].append(b)
        tree[b].append(a)
# λ°©λ¬Έ μμ„ μ •λ³΄ μ…λ ¥
    for a, b in order:
        # 0μ„ λ‚μ¤‘μ— λ°©λ¬Έν•΄μ•Ό ν•λ” κ²½μ°λ” μ΅΄μ¬ X
        if b == 0: return False
        orders[b] = a
```
- `defaultdict`λ¥Ό μ΄μ©ν•΄ κΈ°λ³Έκ°’μ΄ **list**μΈ **dictionary** μƒμ„±ν•κ³  `path` μ •λ³΄ μ €μ¥  
- **λ°©λ¬Έ μμ„ μ •λ³΄ μ…λ ¥**  
  λ°©λ¬Έ μμ„ μ •λ³΄λ¥Ό `orders` λ¦¬μ¤νΈμ— μ…λ ¥  
  μ΄ λ•, **0**μ„ λ‚μ¤‘μ— λ°©λ¬Έν•΄μ•Ό ν•λ” κ²½μ°λ” μ΅΄μ¬ν•  μ μ—†κΈ° λ•λ¬Έμ— `b`κ°€ **0**μ΄λ©΄ **False** λ°ν™ν•κ³  μΆ…λ£  

```Python
# DFS νƒμƒ‰
    stack.extend(tree[0])
    while stack:
        num = stack.pop()
        if visited[num]: continue
        # λ¨Όμ € λ°©λ¬Έν•΄μ•Ό ν•  λ°©μ΄ μμ§€λ§, λ°©λ¬Έν•μ§€ μ•μ€ κ²½μ°
        if orders[num] and not visited[orders[num]]:
            after[orders[num]] = num
            continue
        # λ°©λ¬Έν•μ§€ μ•μ€ κ²½μ°
        visited[num] = True
        stack.extend(tree[num])
        if after[num] != -1:
            stack.append(after[num])    # after κ°’μ΄ μμΌλ©΄ append
# ν•λ‚λΌλ„ λ°©λ¬Έν•μ§€ μ•μ•μΌλ©΄ False
    if False in visited:
        return False
    return True
```
- **DFS νƒμƒ‰**  
  **stack**μ„ μ΄μ©ν•΄μ„ λ°©λ¬Έν•μ§€ μ•μ€ κ²½μ°μ— **stack**μ— μ—°κ²°λ λ…Έλ“ κ°’μ„ λ„£λ” λ°©μ‹μΌλ΅ **DFS** νƒμƒ‰  
  λ¨Όμ € λ°©λ¬Έν•΄μ•Ό ν•  λ°©μ΄ μμ§€λ§ λ°©λ¬Έν•μ§€ μ•μ€ κ²½μ°μ—λ” λ‹¤μμ— λ°”λ΅ λ°©λ¬Έν•΄μ„ μ²λ¦¬ν•΄μ£ΌκΈ° μ„ν•΄ λ¨Όμ € λ°©λ¬Έν•΄μ•Ό ν•  ν•΄λ‹Ή `after` κ°’μ— ν„μ¬ κ°’ μ €μ¥  
  μΌλ°μ μΈ κ²½μ°μ—λ” `visited` μ—…λ°μ΄νΈ ν•΄μ£Όκ³ , **stack**μ— μ—°κ²°λ λ…Έλ“ κ°’ **extend**ν•κ³ , ν•΄λ‹Ή `after` κ°’μ΄ μμΌλ©΄ κ·Έ κ°’λ„ **append**  
  νƒμƒ‰ λλ‚ ν›„μ—, ν•λ‚λΌλ„ λ°©λ¬Έν•μ§€ μ•μ€ κ³³μ΄ μμΌλ©΄ **False** λ°ν™  


---

## π§© Code
<details><summary>μ „μ²΄ μ½”λ“ ν™•μΈ</summary>

```Python
from collections import defaultdict
def solution(n, path, order):
    stack = []
    tree = defaultdict(list)
    orders = defaultdict(int)
    visited = [False for _ in range(n)]
    after = [-1 for _ in range(n)]
    # tree μ •λ³΄ μ…λ ¥
    for a, b in path:
        tree[a].append(b)
        tree[b].append(a)
    # λ°©λ¬Έ μμ„ μ •λ³΄ μ…λ ¥
    for a, b in order:
        # 0μ„ λ‚μ¤‘μ— λ°©λ¬Έν•΄μ•Ό ν•λ” κ²½μ°λ” μ΅΄μ¬ X
        if b == 0: return False
        orders[b] = a
    # DFS νƒμƒ‰
    stack.extend(tree[0])
    while stack:
        num = stack.pop()
        if visited[num]: continue
        # λ¨Όμ € λ°©λ¬Έν•΄μ•Ό ν•  λ°©μ΄ μμ§€λ§, λ°©λ¬Έν•μ§€ μ•μ€ κ²½μ°
        if orders[num] and not visited[orders[num]]:
            after[orders[num]] = num
            continue
        # λ°©λ¬Έν•μ§€ μ•μ€ κ²½μ°
        visited[num] = True
        stack.extend(tree[num])
        if after[num] != -1:
            stack.append(after[num])    # after κ°’μ΄ μμΌλ©΄ append
    # ν•λ‚λΌλ„ λ°©λ¬Έν•μ§€ μ•μ•μΌλ©΄ False
    if False in visited:
        return False
    return True
```
</details>

---

## π“ Review

λ¬Έμ λ¥Ό μ΄ν•΄ν•κ³  μ•„μ΄λ””μ–΄λ¥Ό λ‚΄κΈ°κΉμ§€ μ‹κ°„μ΄ μ¤λκ±Έλ Έλ‹¤. DFSλ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ‹¤λ” κ²ƒμ€ μ‰½κ² μ• μ μμ—μ§€λ§, after λ¦¬μ¤νΈλ¥Ό λ§λ“¤μ–΄μ„ λ°©λ¬Έ μ°μ„ μμ„λ¥Ό μ²λ¦¬ν•λ” λ°©λ²•μ„ μƒκ°ν•΄λ‚΄μ§€ λ»ν•΄μ„ λ‹¤λ¥Έ μ‚¬λλ“¤μ ννΈλ¥Ό λ³΄κ³  κµ¬ν„ν–λ‹¤.. κ·Έλ¦¬κ³  30λ² ν…μ¤νΈ μΌ€μ΄μ¤λ„ κ³„μ† ν‹€λ ¤μ„ μ΄μ λ¥Ό λ°λλ”λ° 0μ„ λ‚μ¤‘μ— λ°©λ¬Έν•΄μ•Ό ν•λ” κ²½μ°λ” μ΅΄μ¬ν•  μ μ—†λ‹¤λ” κ²ƒμ„ μƒκ° λ»ν•΄μ„ λ‚μ¤‘μ— μ΄ λ¶€λ¶„μ„ μ²λ¦¬ν•κ³  ν†µκ³Όν–λ‹¤.  
μΉ΄μΉ΄μ¤ μΈν„΄ μ½”ν… λ§μ§€λ§‰ λ¬Έμ λ‹µκ² μ‰½μ§€ μ•λ‹¤,,


```toc
```